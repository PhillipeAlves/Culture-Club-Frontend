{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import InputField from\"./InputField\";import SubmitButton from\"./SubmitButton\";import UserStore from\"../../stores/UserStore\";import\"./Login.css\";var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);var _super=_createSuper(LoginForm);function LoginForm(){var _this;_classCallCheck(this,LoginForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:'',password:'',buttonDisabled:false};_this.setInputValue=function(property,val){val=val.trim();if(val.length>50){return;}_this.setState(_defineProperty({},property,val));};return _this;}_createClass(LoginForm,[{key:\"doLogin\",value:function(){var _doLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.state.email){_context.next=2;break;}return _context.abrupt(\"return\");case 2:if(this.state.password){_context.next=4;break;}return _context.abrupt(\"return\");case 4:this.setState({buttonDisabled:true});_context.prev=5;_context.next=8;return fetch(\"login\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-type\":\"application/json\"},body:JSON.stringify({email:this.state.email,password:this.state.password})});case 8:res=_context.sent;_context.next=11;return res.json();case 11:result=_context.sent;if(result&&result.success){UserStore.isLoggedIn=true;UserStore.email=result.email;}else if(result&&result.success===false){this.resetForm();alert(result.msg);}_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](5);console.log(_context.t0);this.resetForm();case 19:case\"end\":return _context.stop();}}},_callee,this,[[5,15]]);}));function doLogin(){return _doLogin.apply(this,arguments);}return doLogin;}()},{key:\"resetForm\",value:function resetForm(){this.setState({email:\"\",password:\"\",buttonDisabled:false});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"loginForm\"},\"Log in\",/*#__PURE__*/React.createElement(InputField,{type:\"text\",placeholder:\"Email\",value:this.state.email?this.state.email:\"\",onChange:function onChange(val){return _this2.setInputValue(\"email\",val);}}),/*#__PURE__*/React.createElement(InputField,{type:\"password\",placeholder:\"Password\",value:this.state.password?this.state.password:\"\",onChange:function onChange(val){return _this2.setInputValue(\"password\",val);}}),/*#__PURE__*/React.createElement(SubmitButton,{text:\"Login\",disabled:this.state.buttonDisabled,onClick:function onClick(){return _this2.doLogin();}}));}}]);return LoginForm;}(Component);export default LoginForm;","map":{"version":3,"sources":["/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/src/components/login/LoginForm.js"],"names":["React","Component","InputField","SubmitButton","UserStore","LoginForm","state","email","password","buttonDisabled","setInputValue","property","val","trim","length","setState","fetch","method","headers","Accept","body","JSON","stringify","res","json","result","success","isLoggedIn","resetForm","alert","msg","console","log","doLogin"],"mappings":"4wCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAO,aAAP,C,GAEMC,CAAAA,S,uUAoBJC,K,CAAQ,CACNC,KAAK,CAAE,EADD,CAENC,QAAQ,CAAE,EAFJ,CAGNC,cAAc,CAAE,KAHV,C,OAMRC,a,CAAgB,SAACC,QAAD,CAAWC,GAAX,CAAmB,CACjCA,GAAG,CAAGA,GAAG,CAACC,IAAJ,EAAN,CACA,GAAID,GAAG,CAACE,MAAJ,CAAa,EAAjB,CAAqB,CACnB,OACD,CACD,MAAKC,QAAL,oBACGJ,QADH,CACcC,GADd,GAGD,C,iSAGM,KAAKN,KAAL,CAAWC,K,oEAGX,KAAKD,KAAL,CAAWE,Q,iEAGhB,KAAKO,QAAL,CAAc,CACZN,cAAc,CAAE,IADJ,CAAd,E,sCAIkBO,CAAAA,KAAK,CAAC,OAAD,CAAU,CAC7BC,MAAM,CAAE,MADqB,CAE7BC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CAEP,eAAgB,kBAFT,CAFoB,CAM7BC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBf,KAAK,CAAE,KAAKD,KAAL,CAAWC,KADC,CAEnBC,QAAQ,CAAE,KAAKF,KAAL,CAAWE,QAFF,CAAf,CANuB,CAAV,C,QAAjBe,G,sCAYeA,CAAAA,GAAG,CAACC,IAAJ,E,SAAfC,M,eACJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC5BtB,SAAS,CAACuB,UAAV,CAAuB,IAAvB,CACAvB,SAAS,CAACG,KAAV,CAAkBkB,MAAM,CAAClB,KAAzB,CACD,CAHD,IAGO,IAAIkB,MAAM,EAAIA,MAAM,CAACC,OAAP,GAAmB,KAAjC,CAAwC,CAC7C,KAAKE,SAAL,GACAC,KAAK,CAACJ,MAAM,CAACK,GAAR,CAAL,CACD,C,iFAEDC,OAAO,CAACC,GAAR,cACA,KAAKJ,SAAL,G,iMAIQ,CACV,KAAKb,QAAL,CAAc,CACZR,KAAK,CAAE,EADK,CAEZC,QAAQ,CAAE,EAFE,CAGZC,cAAc,CAAE,KAHJ,CAAd,EAKD,C,uCAEQ,iBACP,mBACE,2BAAK,SAAS,CAAC,WAAf,wBAEE,oBAAC,UAAD,EACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,OAFd,CAGE,KAAK,CAAE,KAAKH,KAAL,CAAWC,KAAX,CAAmB,KAAKD,KAAL,CAAWC,KAA9B,CAAsC,EAH/C,CAIE,QAAQ,CAAE,kBAACK,GAAD,QAAS,CAAA,MAAI,CAACF,aAAL,CAAmB,OAAnB,CAA4BE,GAA5B,CAAT,EAJZ,EAFF,cAQE,oBAAC,UAAD,EACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,KAAK,CAAE,KAAKN,KAAL,CAAWE,QAAX,CAAsB,KAAKF,KAAL,CAAWE,QAAjC,CAA4C,EAHrD,CAIE,QAAQ,CAAE,kBAACI,GAAD,QAAS,CAAA,MAAI,CAACF,aAAL,CAAmB,UAAnB,CAA+BE,GAA/B,CAAT,EAJZ,EARF,cAcE,oBAAC,YAAD,EACE,IAAI,CAAC,OADP,CAEE,QAAQ,CAAE,KAAKN,KAAL,CAAWG,cAFvB,CAGE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACwB,OAAL,EAAN,EAHX,EAdF,CADF,CAsBD,C,uBAxGqBhC,S,EA2GxB,cAAeI,CAAAA,SAAf","sourcesContent":["import React, { Component } from \"react\";\nimport InputField from \"./InputField\";\nimport SubmitButton from \"./SubmitButton\";\nimport UserStore from \"../../stores/UserStore\";\nimport \"./Login.css\";\n\nclass LoginForm extends Component {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = {\n  //     username: \"\",\n  //     password: \"\",\n  //     buttonDisabled: false,\n  //   };\n  // }\n\n  // setInputValue(property, val) {\n  //   val = val.trim();\n  //   if (val.length > 50) {\n  //     return;\n  //   }\n  //   this.setState({\n  //     [property]: val,\n  //   });\n  // }\n\n  state = {\n    email: '',\n    password: '',\n    buttonDisabled: false\n  }\n\n  setInputValue = (property, val) => {\n    val = val.trim();\n    if (val.length > 50) {\n      return;\n    }\n    this.setState({\n      [property]: val,\n    });\n  }\n\n  async doLogin() {\n    if (!this.state.email) {\n      return;\n    }\n    if (!this.state.password) {\n      return;\n    }\n    this.setState({\n      buttonDisabled: true,\n    });\n    try {\n      let res = await fetch(\"login\", {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: this.state.email,\n          password: this.state.password,\n        }),\n      });\n\n      let result = await res.json();\n      if (result && result.success) {\n        UserStore.isLoggedIn = true;\n        UserStore.email = result.email;\n      } else if (result && result.success === false) {\n        this.resetForm();\n        alert(result.msg);\n      }\n    } catch (e) {\n      console.log(e);\n      this.resetForm();\n    }\n  }\n\n  resetForm() {\n    this.setState({\n      email: \"\",\n      password: \"\",\n      buttonDisabled: false,\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"loginForm\">\n        Log in\n        <InputField\n          type=\"text\"\n          placeholder=\"Email\"\n          value={this.state.email ? this.state.email : \"\"}\n          onChange={(val) => this.setInputValue(\"email\", val)}\n        />\n        <InputField\n          type=\"password\"\n          placeholder=\"Password\"\n          value={this.state.password ? this.state.password : \"\"}\n          onChange={(val) => this.setInputValue(\"password\", val)}\n        />\n        <SubmitButton\n          text=\"Login\"\n          disabled={this.state.buttonDisabled}\n          onClick={() => this.doLogin()}\n        />\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}