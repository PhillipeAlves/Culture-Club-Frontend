{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Password from\"./Password\";import Email from\"./Email\";import SubmitButton from\"./SubmitButton\";import UserStore from\"../../stores/UserStore\";import\"./Signup.css\";var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);var _super=_createSuper(Signup);function Signup(props){var _this;_classCallCheck(this,Signup);_this=_super.call(this,props);_this.handleToggle=function(){_this.setState(function(state){return{isToggleOn:!state.isToggleOn};});};_this.handlePassword=function(e){_this.setState({password:e.target.value});};_this.handleUsername=function(e){_this.setState({username:e.target.value});};_this.handleEmail=function(e){_this.setState({email:e.target.value});};_this.state={username:\"\",email:\"\",password:\"\",buttonDisabled:false,isToggleOn:false};return _this;}_createClass(Signup,[{key:\"handleSignUp\",value:function(){var _handleSignUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.state.username){_context.next=2;break;}return _context.abrupt(\"return\");case 2:if(this.state.email){_context.next=4;break;}return _context.abrupt(\"return\");case 4:if(this.state.password){_context.next=6;break;}return _context.abrupt(\"return\");case 6:this.setState({buttonDisabled:true});_context.prev=7;_context.next=10;return fetch(\"/signup\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-type\":\"application/json\"},body:JSON.stringify({username:this.state.username,email:this.state.email,password:this.state.password})});case 10:res=_context.sent;_context.next=13;return res.json();case 13:result=_context.sent;// ===SIGN UP SUCCESSFUL===\nif(result&&result.success){console.log(result.username);UserStore.isLoggedIn=true;UserStore.username=result.username;UserStore.userID=result.userID;// ===SIGN UP FAILED===\n}else if(result&&result.success===false){this.resetForm();alert(result.msg);}_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](7);console.log(_context.t0);this.resetForm();case 21:case\"end\":return _context.stop();}}},_callee,this,[[7,17]]);}));function handleSignUp(){return _handleSignUp.apply(this,arguments);}return handleSignUp;}()},{key:\"resetForm\",value:function resetForm(){this.setState({username:\"\",email:\"\",password:\"\",buttonDisabled:false});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,username=_this$state.username,email=_this$state.email,password=_this$state.password,buttonDisabled=_this$state.buttonDisabled,isToggleOn=_this$state.isToggleOn;return/*#__PURE__*/React.createElement(\"div\",{className:\"sign-up-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sign-up-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"img-banner\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-main\",src:\"boat.png\",alt:\"\"})),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Sign up\"),/*#__PURE__*/React.createElement(\"input\",{className:\"user-name\",name:\"username\",onChange:this.handleUsername,type:\"text\",id:\"\",placeholder:\"First name\"}),/*#__PURE__*/React.createElement(Email,{name:\"email\",email:email,onChange:this.handleEmail}),/*#__PURE__*/React.createElement(Password,{name:\"password\",handleToggle:this.handleToggle,isToggleOn:isToggleOn,password:password,onChange:this.handlePassword}),/*#__PURE__*/React.createElement(SubmitButton,{disabled:buttonDisabled,onClick:function onClick(){return _this2.handleSignUp();}}))));}}]);return Signup;}(Component);export default Signup;","map":{"version":3,"sources":["/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/src/components/signup/Signup.js"],"names":["React","Component","Password","Email","SubmitButton","UserStore","Signup","props","handleToggle","setState","state","isToggleOn","handlePassword","e","password","target","value","handleUsername","username","handleEmail","email","buttonDisabled","fetch","method","headers","Accept","body","JSON","stringify","res","json","result","success","console","log","isLoggedIn","userID","resetForm","alert","msg","handleSignUp"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Password from \"./Password\";\nimport Email from \"./Email\";\nimport SubmitButton from \"./SubmitButton\";\nimport UserStore from \"../../stores/UserStore\";\nimport \"./Signup.css\";\n\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      buttonDisabled: false,\n      isToggleOn: false,\n    };\n  }\n  handleToggle = () => {\n    this.setState((state) => ({\n      isToggleOn: !state.isToggleOn,\n    }));\n  };\n  handlePassword = (e) => {\n    this.setState({\n      password: e.target.value,\n    });\n  };\n  handleUsername = (e) => {\n    this.setState({\n      username: e.target.value,\n    });\n  };\n  handleEmail = (e) => {\n    this.setState({\n      email: e.target.value,\n    });\n  };\n  async handleSignUp() {\n    if (!this.state.username) {\n      return;\n    }\n    if (!this.state.email) {\n      return;\n    }\n    if (!this.state.password) {\n      return;\n    }\n    this.setState({\n      buttonDisabled: true,\n    });\n    try {\n      let res = await fetch(\"/signup\", {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          username: this.state.username,\n          email: this.state.email,\n          password: this.state.password,\n        }),\n      });\n\n      let result = await res.json();\n\n      // ===SIGN UP SUCCESSFUL===\n      if (result && result.success) {\n        console.log(result.username);\n        UserStore.isLoggedIn = true;\n        UserStore.username = result.username;\n        UserStore.userID = result.userID;\n\n        // ===SIGN UP FAILED===\n      } else if (result && result.success === false) {\n        this.resetForm();\n        alert(result.msg);\n      }\n    } catch (e) {\n      console.log(e);\n      this.resetForm();\n    }\n  }\n\n  resetForm() {\n    this.setState({\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      buttonDisabled: false,\n    });\n  }\n  render() {\n    const {\n      username,\n      email,\n      password,\n      buttonDisabled,\n      isToggleOn,\n    } = this.state;\n    return (\n      <div className=\"sign-up-container\">\n        <div className=\"sign-up-form\">\n          <div className=\"img-banner\">\n            <img className=\"img-main\" src=\"boat.png\" alt=\"\" />\n          </div>\n          <form>\n            <h2>Sign up</h2>\n            <input\n              className=\"user-name\"\n              name=\"username\"\n              onChange={this.handleUsername}\n              type=\"text\"\n              id=\"\"\n              placeholder=\"First name\"\n            />\n            <Email name=\"email\" email={email} onChange={this.handleEmail} />\n            <Password\n              name=\"password\"\n              handleToggle={this.handleToggle}\n              isToggleOn={isToggleOn}\n              password={password}\n              onChange={this.handlePassword}\n            />\n            <SubmitButton\n              disabled={buttonDisabled}\n              onClick={() => this.handleSignUp()}\n            />\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}