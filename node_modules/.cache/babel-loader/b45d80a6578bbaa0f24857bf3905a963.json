{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Main from'./components/main/Main';import{observer}from'mobx-react';import UserStore from'./stores/UserStore';import LoginForm from'./components/login/LoginForm';import SignUp from'./components/signup/Signup';import LogoutButton from'./components/LogoutButton';import'./App.css';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",// ===CHECK FOR SESSION===\nvalue:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/isLoggedIn',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.email=result.email;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()// ===DESTROY SESSION===\n},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/logout',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.isLoggedIn=false;UserStore.email='';}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this=this;// =-------------Use the router instead!!!\nif(UserStore.loading){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},\"loading, please wait...\")));}else{// === USER IS LOGGED IN===\nif(UserStore.isLoggedIn){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},\"Welcome \",UserStore.email,/*#__PURE__*/React.createElement(\"h2\",null,\"Logged in\"),/*#__PURE__*/React.createElement(LogoutButton,{onClick:function onClick(){return _this.doLogout();}}))));// === USER IS NOT LOGGED IN===\n}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SignUp,null)));}}}}]);return App;}(Component);export default observer(App);","map":{"version":3,"sources":["/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/src/App.js"],"names":["React","Component","Main","observer","UserStore","LoginForm","SignUp","LogoutButton","App","fetch","method","headers","res","json","result","success","loading","isLoggedIn","email","console","log","doLogout"],"mappings":"+kCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CAGA,MAAO,WAAP,C,GAEMC,CAAAA,G,mNAEJ;wRAIoBC,CAAAA,KAAK,CAAC,aAAD,CAAgB,CACnCC,MAAM,CAAE,MAD2B,CAEnCC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAF0B,CAAhB,C,QAAjBC,G,qCAOeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,eACJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC5BX,SAAS,CAACY,OAAV,CAAoB,KAApB,CACAZ,SAAS,CAACa,UAAV,CAAuB,IAAvB,CACAb,SAAS,CAACc,KAAV,CAAkBJ,MAAM,CAACI,KAAzB,CACD,CAJD,IAIO,CACLd,SAAS,CAACY,OAAV,CAAoB,KAApB,CACAZ,SAAS,CAACa,UAAV,CAAuB,KAAvB,CACD,C,iFAGDb,SAAS,CAACY,OAAV,CAAoB,KAApB,CACAZ,SAAS,CAACa,UAAV,CAAuB,KAAvB,C,kLAIJ;wSAGoBR,CAAAA,KAAK,CAAC,SAAD,CAAY,CAC/BC,MAAM,CAAE,MADuB,CAE/BC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAFsB,CAAZ,C,QAAjBC,G,uCAOeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,gBACJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC5BX,SAAS,CAACa,UAAV,CAAuB,KAAvB,CACAb,SAAS,CAACc,KAAV,CAAkB,EAAlB,CACD,C,qFAIDC,OAAO,CAACC,GAAR,e,gMAIK,gBAEP;AAEA,GAAIhB,SAAS,CAACY,OAAd,CAAuB,CACrB,mBACE,4CACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,WAAf,4BADF,CADF,CADF,CASD,CAVD,IAUO,CAEL;AACA,GAAIZ,SAAS,CAACa,UAAd,CAA0B,CACxB,mBACE,4CACE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,WAAf,aACWb,SAAS,CAACc,KADrB,cAEE,0CAFF,cAGE,oBAAC,YAAD,EACE,OAAO,CAAE,yBAAM,CAAA,KAAI,CAACG,QAAL,EAAN,EADX,EAHF,CADF,CADF,CADF,CAcA;AACD,CAhBD,IAgBO,CACL,mBACE,2BAAK,SAAS,CAAC,KAAf,eAIE,4CACE,oBAAC,MAAD,MADF,CAJF,CADF,CAaD,CACF,CACF,C,iBApGepB,S,EAuGlB,cAAeE,CAAAA,QAAQ,CAACK,GAAD,CAAvB","sourcesContent":["import React, { Component } from 'react';\nimport Main from './components/main/Main'\nimport { observer } from 'mobx-react';\nimport UserStore from './stores/UserStore'\nimport LoginForm from './components/login/LoginForm'\nimport SignUp from './components/signup/Signup'\nimport LogoutButton from './components/LogoutButton'\n\n\nimport './App.css';\n\nclass App extends Component {\n\n  // ===CHECK FOR SESSION===\n\n  async componentDidMount() {\n    try {\n      let res = await fetch('/isLoggedIn', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n      let result = await res.json();\n      if (result && result.success) {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.email = result.email;\n      } else {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n      }\n    }\n    catch (e) {\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  // ===DESTROY SESSION===\n  async doLogout() {\n    try {\n      let res = await fetch('/logout', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n      let result = await res.json();\n      if (result && result.success) {\n        UserStore.isLoggedIn = false;\n        UserStore.email = '';\n      }\n\n    }\n    catch (e) {\n      console.log(e)\n    }\n  }\n\n  render() {\n\n    // =-------------Use the router instead!!!\n\n    if (UserStore.loading) {\n      return (\n        <div>\n          <div className=\"App\">\n            <div className=\"container\">\n              loading, please wait...\n            </div>\n          </div>\n        </div>\n      )\n    } else {\n\n      // === USER IS LOGGED IN===\n      if (UserStore.isLoggedIn) {\n        return (\n          <div>\n            <div className=\"App\">\n              <div className=\"container\">\n                Welcome {UserStore.email}\n                <h2>Logged in</h2>\n                <LogoutButton\n                  onClick={() => this.doLogout()}\n                />\n              </div>\n            </div>\n          </div>\n        )\n\n        // === USER IS NOT LOGGED IN===\n      } else {\n        return (\n          <div className=\"App\">\n            {/* <div className=\"container\">\n              <LoginForm />\n            </div> */}\n            <div>\n              <SignUp />\n            </div>\n            {/* <div>\n              <Main />\n            </div> */}\n          </div>\n        );\n      }\n    }\n  }\n}\n\nexport default observer(App);\n\n\n"]},"metadata":{},"sourceType":"module"}