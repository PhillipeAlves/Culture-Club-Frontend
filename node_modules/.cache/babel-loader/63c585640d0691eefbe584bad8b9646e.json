{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Email from'../signup/Email';import LoginPassword from'./LoginPassword';import UserStore from\"../../stores/UserStore\";import\"./Login.css\";var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);var _super=_createSuper(LoginForm);function LoginForm(){var _this;_classCallCheck(this,LoginForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:'',password:'',buttonDisabled:false,isToggleOn:true};_this.handleToggle=function(){_this.setState(function(state){return{isToggleOn:!state.isToggleOn};});};_this.handlePassword=function(e){_this.setState({password:e.target.value});};_this.handleEmail=function(e){_this.setState({email:e.target.value});};_this.handleLogIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(e);e.preventDefault();if(_this.state.email){_context.next=4;break;}return _context.abrupt(\"return\");case 4:if(_this.state.password){_context.next=6;break;}return _context.abrupt(\"return\");case 6:_this.setState({buttonDisabled:true});_context.prev=7;_context.next=10;return fetch(\"login\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-type\":\"application/json\"},body:JSON.stringify({email:_this.state.email,password:_this.state.password})});case 10:res=_context.sent;_context.next=13;return res.json();case 13:result=_context.sent;// ===LOGIN SUCCESSFUL===\nif(result&&result.success){UserStore.isLoggedIn=true;UserStore.email=result.email;console.log(UserStore.email);// ===LOGIN FAILED===\n}else if(result&&result.success===false){_this.resetForm();alert(result.msg);}_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](7);console.log(_context.t0);_this.resetForm();case 21:case\"end\":return _context.stop();}}},_callee,null,[[7,17]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(LoginForm,[{key:\"resetForm\",value:function resetForm(){this.setState({email:\"\",password:\"\",buttonDisabled:false});}},{key:\"render\",value:function render(){var _this$state=this.state,email=_this$state.email,password=_this$state.password,buttonDisabled=_this$state.buttonDisabled,isToggleOn=_this$state.isToggleOn;return/*#__PURE__*/React.createElement(\"div\",{className:\"login-form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"h2\",null,\"Log in\"),/*#__PURE__*/React.createElement(Email,{name:\"email\",email:email,onChange:this.handleEmail}),/*#__PURE__*/React.createElement(LoginPassword,{name:\"password\",handleToggle:this.handleToggle,isToggleOn:isToggleOn,password:password,onChange:this.handlePassword}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-btn\",disabled:buttonDisabled},\"Login\")));}}]);return LoginForm;}(Component);export default LoginForm;// import React, { Component } from \"react\";\n// import Email from '../signup/Email'\n// import LoginPassword from './LoginPassword'\n// import UserStore from \"../../stores/UserStore\";\n// import \"./Login.css\";\n// class LoginForm extends Component {\n//   state = {\n//     email: '',\n//     password: '',\n//     buttonDisabled: false,\n//     isToggleOn: true\n//   }\n//   handleToggle = () => {\n//     this.setState(state => ({\n//       isToggleOn: !state.isToggleOn\n//     }));\n//   };\n//   handlePassword = e => {\n//     this.setState({\n//       password: e.target.value\n//     })\n//   }\n//   handleEmail = e => {\n//     this.setState({\n//       email: e.target.value\n//     })\n//   }\n//   async handleSubmit() {\n//     e.preventDefault()\n//     console.log('noiiiiiii')\n//     if (!this.state.email) {\n//       return;\n//     }\n//     if (!this.state.password) {\n//       return;\n//     }\n//     this.setState({\n//       buttonDisabled: true,\n//     });\n//     try {\n//       let res = await fetch(\"login\", {\n//         method: \"post\",\n//         headers: {\n//           Accept: \"application/json\",\n//           \"Content-type\": \"application/json\",\n//         },\n//         body: JSON.stringify({\n//           email: this.state.email,\n//           password: this.state.password,\n//         }),\n//       });\n//       let result = await res.json();\n//       // ===LOGIN SUCCESSFUL===\n//       if (result && result.success) {\n//         UserStore.isLoggedIn = true;\n//         UserStore.email = result.email;\n//         console.log(UserStore.email)\n//         // ===LOGIN FAILED===\n//       } else if (result && result.success === false) {\n//         this.resetForm();\n//         alert(result.msg);\n//       }\n//     } catch (e) {\n//       console.log(e);\n//       this.resetForm();\n//     }\n//   }\n//   resetForm() {\n//     this.setState({\n//       email: \"\",\n//       password: \"\",\n//       buttonDisabled: false,\n//     });\n//   }\n//   render() {\n//     const { email, password, buttonDisabled, isToggleOn } = this.state\n//     return (\n//       <div className=\"login-form\">\n//         <form onSubmit={this.handleSubmit}>\n//           <h2>Log in</h2>\n//           <Email name=\"email\" email={email} onChange={this.handleEmail} />\n//           <LoginPassword name=\"password\" handleToggle={this.handleToggle} isToggleOn={isToggleOn} password={password} onChange={this.handlePassword} />\n//           <button className=\"login-btn\" disabled={buttonDisabled}>Login</button>\n//         </form>\n//       </div >\n//     );\n//   }\n// }\n// export default LoginForm;","map":{"version":3,"sources":["/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/src/components/login/LoginForm.js"],"names":["React","Component","Email","LoginPassword","UserStore","LoginForm","state","email","password","buttonDisabled","isToggleOn","handleToggle","setState","handlePassword","e","target","value","handleEmail","handleLogIn","console","log","preventDefault","fetch","method","headers","Accept","body","JSON","stringify","res","json","result","success","isLoggedIn","resetForm","alert","msg","handleSubmit"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Email from '../signup/Email'\nimport LoginPassword from './LoginPassword'\nimport UserStore from \"../../stores/UserStore\";\nimport \"./Login.css\";\n\nclass LoginForm extends Component {\n\n  state = {\n    email: '',\n    password: '',\n    buttonDisabled: false,\n    isToggleOn: true\n  }\n\n  handleToggle = () => {\n    this.setState(state => ({\n      isToggleOn: !state.isToggleOn\n    }));\n  };\n  handlePassword = e => {\n    this.setState({\n      password: e.target.value\n    })\n  }\n  handleEmail = e => {\n    this.setState({\n      email: e.target.value\n    })\n  }\n\n  handleLogIn = async (e) => {\n    console.log(e)\n    e.preventDefault()\n    if (!this.state.email) {\n      return;\n    }\n    if (!this.state.password) {\n      return;\n    }\n    this.setState({\n      buttonDisabled: true,\n    });\n    try {\n      let res = await fetch(\"login\", {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: this.state.email,\n          password: this.state.password,\n        }),\n      });\n\n      let result = await res.json();\n\n      // ===LOGIN SUCCESSFUL===\n      if (result && result.success) {\n        UserStore.isLoggedIn = true;\n        UserStore.email = result.email;\n        console.log(UserStore.email)\n\n        // ===LOGIN FAILED===\n      } else if (result && result.success === false) {\n        this.resetForm();\n        alert(result.msg);\n      }\n    } catch (e) {\n      console.log(e);\n      this.resetForm();\n    }\n  }\n\n  resetForm() {\n    this.setState({\n      email: \"\",\n      password: \"\",\n      buttonDisabled: false,\n    });\n  }\n\n  render() {\n    const { email, password, buttonDisabled, isToggleOn } = this.state\n    return (\n      <div className=\"login-form\">\n        <form onSubmit={this.handleSubmit}>\n          <h2>Log in</h2>\n          <Email name=\"email\" email={email} onChange={this.handleEmail} />\n          <LoginPassword name=\"password\" handleToggle={this.handleToggle} isToggleOn={isToggleOn} password={password} onChange={this.handlePassword} />\n          <button className=\"login-btn\" disabled={buttonDisabled}>Login</button>\n        </form>\n      </div >\n    );\n  }\n}\n\nexport default LoginForm;\n\n\n// import React, { Component } from \"react\";\n// import Email from '../signup/Email'\n// import LoginPassword from './LoginPassword'\n// import UserStore from \"../../stores/UserStore\";\n// import \"./Login.css\";\n\n// class LoginForm extends Component {\n\n//   state = {\n//     email: '',\n//     password: '',\n//     buttonDisabled: false,\n//     isToggleOn: true\n//   }\n\n//   handleToggle = () => {\n//     this.setState(state => ({\n//       isToggleOn: !state.isToggleOn\n//     }));\n//   };\n//   handlePassword = e => {\n//     this.setState({\n//       password: e.target.value\n//     })\n//   }\n//   handleEmail = e => {\n//     this.setState({\n//       email: e.target.value\n//     })\n//   }\n\n//   async handleSubmit() {\n//     e.preventDefault()\n//     console.log('noiiiiiii')\n//     if (!this.state.email) {\n//       return;\n//     }\n//     if (!this.state.password) {\n//       return;\n//     }\n//     this.setState({\n//       buttonDisabled: true,\n//     });\n//     try {\n//       let res = await fetch(\"login\", {\n//         method: \"post\",\n//         headers: {\n//           Accept: \"application/json\",\n//           \"Content-type\": \"application/json\",\n//         },\n//         body: JSON.stringify({\n//           email: this.state.email,\n//           password: this.state.password,\n//         }),\n//       });\n\n//       let result = await res.json();\n\n//       // ===LOGIN SUCCESSFUL===\n//       if (result && result.success) {\n//         UserStore.isLoggedIn = true;\n//         UserStore.email = result.email;\n//         console.log(UserStore.email)\n\n//         // ===LOGIN FAILED===\n//       } else if (result && result.success === false) {\n//         this.resetForm();\n//         alert(result.msg);\n//       }\n//     } catch (e) {\n//       console.log(e);\n//       this.resetForm();\n//     }\n//   }\n\n//   resetForm() {\n//     this.setState({\n//       email: \"\",\n//       password: \"\",\n//       buttonDisabled: false,\n//     });\n//   }\n\n//   render() {\n//     const { email, password, buttonDisabled, isToggleOn } = this.state\n//     return (\n//       <div className=\"login-form\">\n//         <form onSubmit={this.handleSubmit}>\n//           <h2>Log in</h2>\n//           <Email name=\"email\" email={email} onChange={this.handleEmail} />\n//           <LoginPassword name=\"password\" handleToggle={this.handleToggle} isToggleOn={isToggleOn} password={password} onChange={this.handlePassword} />\n//           <button className=\"login-btn\" disabled={buttonDisabled}>Login</button>\n//         </form>\n//       </div >\n//     );\n//   }\n// }\n\n// export default LoginForm;\n"]},"metadata":{},"sourceType":"module"}