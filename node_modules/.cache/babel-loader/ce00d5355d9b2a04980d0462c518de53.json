{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Password from'./Password';import Email from'./Email';import SubmitButton from\"./SubmitButton\";import UserStore from\"../../stores/UserStore\";import'./Signup.css';var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);var _super=_createSuper(Signup);function Signup(props){var _this;_classCallCheck(this,Signup);_this=_super.call(this,props);_this.handleToggle=function(){_this.setState(function(state){return{isToggleOn:!state.isToggleOn};});};_this.handlePassword=function(e){_this.setState({password:e.target.value});};_this.handleUsername=function(e){_this.setState({username:e.target.value});};_this.handleEmail=function(e){_this.setState({email:e.target.value});};_this.state={username:'',email:'',password:'',buttonDisabled:false,isToggleOn:false};return _this;}_createClass(Signup,[{key:\"handleSignUp\",value:function(){var _handleSignUp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.state.username){_context.next=2;break;}return _context.abrupt(\"return\");case 2:if(this.state.email){_context.next=4;break;}return _context.abrupt(\"return\");case 4:if(this.state.password){_context.next=6;break;}return _context.abrupt(\"return\");case 6:this.setState({buttonDisabled:true});_context.prev=7;_context.next=10;return fetch(\"signup\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-type\":\"application/json\"},body:JSON.stringify({username:this.state.username,email:this.state.email,password:this.state.password})});case 10:res=_context.sent;_context.next=13;return res.json();case 13:result=_context.sent;// ===SIGN UP SUCCESSFUL===\nif(result&&result.success){UserStore.isLoggedIn=true;UserStore.username=result.username;// ===SIGN UP FAILED===\n}else if(result&&result.success===false){this.resetForm();alert(result.msg);}_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](7);console.log(_context.t0);this.resetForm();case 21:case\"end\":return _context.stop();}}},_callee,this,[[7,17]]);}));function handleSignUp(){return _handleSignUp.apply(this,arguments);}return handleSignUp;}()},{key:\"resetForm\",value:function resetForm(){this.setState({username:'',email:\"\",password:\"\",buttonDisabled:false});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,username=_this$state.username,email=_this$state.email,password=_this$state.password,buttonDisabled=_this$state.buttonDisabled,isToggleOn=_this$state.isToggleOn;return/*#__PURE__*/React.createElement(\"div\",{className:\"sign-up-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sign-up-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"img-banner\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-main\",src:\"boat.png\",alt:\"\"})),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Sign up\"),/*#__PURE__*/React.createElement(\"input\",{className:\"user-name\",name:\"username\",onChange:this.handleUsername,type:\"text\",id:\"\",placeholder:\"First name\"}),/*#__PURE__*/React.createElement(Email,{name:\"email\",email:email,onChange:this.handleEmail}),/*#__PURE__*/React.createElement(Password,{name:\"password\",handleToggle:this.handleToggle,isToggleOn:isToggleOn,password:password,onChange:this.handlePassword}),/*#__PURE__*/React.createElement(SubmitButton,{disabled:buttonDisabled,onClick:function onClick(){return _this2.handleSignUp();}}))));}}]);return Signup;}(Component);export default Signup;","map":{"version":3,"sources":["/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/src/components/signup/Signup.js"],"names":["React","Component","Password","Email","SubmitButton","UserStore","Signup","props","handleToggle","setState","state","isToggleOn","handlePassword","e","password","target","value","handleUsername","username","handleEmail","email","buttonDisabled","fetch","method","headers","Accept","body","JSON","stringify","res","json","result","success","isLoggedIn","resetForm","alert","msg","console","log","handleSignUp"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Password from './Password'\nimport Email from './Email'\nimport SubmitButton from \"./SubmitButton\";\nimport UserStore from \"../../stores/UserStore\";\nimport './Signup.css'\n\n\nclass Signup extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            email: '',\n            password: '',\n            buttonDisabled: false,\n            isToggleOn: false\n        }\n    }\n    handleToggle = () => {\n        this.setState(state => ({\n            isToggleOn: !state.isToggleOn\n        }));\n    };\n    handlePassword = e => {\n        this.setState({\n            password: e.target.value\n        })\n    }\n    handleUsername = e => {\n        this.setState({\n            username: e.target.value\n        })\n    }\n    handleEmail = e => {\n        this.setState({\n            email: e.target.value\n        })\n    }\n    async handleSignUp() {\n        if (!this.state.username) {\n            return;\n        }\n        if (!this.state.email) {\n            return;\n        }\n        if (!this.state.password) {\n            return;\n        }\n        this.setState({\n            buttonDisabled: true,\n        });\n        try {\n            let res = await fetch(\"signup\", {\n                method: \"post\",\n                headers: {\n                    Accept: \"application/json\",\n                    \"Content-type\": \"application/json\",\n                },\n                body: JSON.stringify({\n                    username: this.state.username,\n                    email: this.state.email,\n                    password: this.state.password,\n                }),\n            });\n\n            let result = await res.json();\n\n            // ===SIGN UP SUCCESSFUL===\n            if (result && result.success) {\n                UserStore.isLoggedIn = true;\n                UserStore.username = result.username;\n\n                // ===SIGN UP FAILED===\n            } else if (result && result.success === false) {\n                this.resetForm();\n                alert(result.msg);\n            }\n        } catch (e) {\n            console.log(e);\n            this.resetForm();\n        }\n    }\n\n    resetForm() {\n        this.setState({\n            username: '',\n            email: \"\",\n            password: \"\",\n            buttonDisabled: false,\n        });\n    }\n    render() {\n        const { username, email, password, buttonDisabled, isToggleOn } = this.state\n        return (\n            <div className=\"sign-up-container\">\n                <div className=\"sign-up-form\">\n                    <div className=\"img-banner\">\n                        <img className=\"img-main\" src=\"boat.png\" alt=\"\" />\n                    </div>\n                    <form>\n                        <h2>Sign up</h2>\n                        <input className=\"user-name\" name=\"username\" onChange={this.handleUsername} type=\"text\" id=\"\" placeholder=\"First name\" />\n                        <Email name=\"email\" email={email} onChange={this.handleEmail} />\n                        <Password name=\"password\" handleToggle={this.handleToggle} isToggleOn={isToggleOn} password={password} onChange={this.handlePassword} />\n                        <SubmitButton\n                            disabled={buttonDisabled}\n                            onClick={() => this.handleSignUp()}\n                        />\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Signup;\n\n"]},"metadata":{},"sourceType":"module"}