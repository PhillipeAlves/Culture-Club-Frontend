{"ast":null,"code":"import _classCallCheck from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Email from\"../signup/Email\";import LoginPassword from\"./LoginPassword\";import SubmitButton from\"./SubmitButton\";import UserStore from\"../../stores/UserStore\";import Profile from\"../Profile/Profile\";import\"./Login.css\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleToggle=function(){_this.setState(function(state){return{isToggleOn:!state.isToggleOn};});};_this.handlePassword=function(e){_this.setState({password:e.target.value});};_this.handleEmail=function(e){_this.setState({email:e.target.value});};_this.handleLogin=function(e){if(!_this.state.email){return;}if(!_this.state.password){return;}_this.setState({buttonDisabled:true});axios.post(\"/login\",{email:_this.state.email,password:_this.state.password}).then(function(res){if(res.data.success){UserStore.isLoggedIn=true;UserStore.userID=res.userID;UserStore.username=res.username;}else{_this.resetForm();alert(res.msg);}}).catch(function(error){console.log(error);});};_this.state={email:\"\",password:\"\",buttonDisabled:false,isToggleOn:false};return _this;}_createClass(Login,[{key:\"resetForm\",value:function resetForm(){this.setState({email:\"\",password:\"\",buttonDisabled:false});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,email=_this$state.email,password=_this$state.password,buttonDisabled=_this$state.buttonDisabled,isToggleOn=_this$state.isToggleOn;if(UserStore.isLoggedIn){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Profile,null));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"login-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"img-banner\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-main\",src:\"boat.png\",alt:\"\"})),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Log in\"),/*#__PURE__*/React.createElement(Email,{name:\"email\",email:email,onChange:this.handleEmail}),/*#__PURE__*/React.createElement(LoginPassword,{name:\"password\",handleToggle:this.handleToggle,isToggleOn:isToggleOn,password:password,onChange:this.handlePassword}),/*#__PURE__*/React.createElement(SubmitButton,{disabled:buttonDisabled,onClick:function onClick(){return _this2.handleLogin();}}))));}}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/src/components/login/Login.js"],"names":["React","Component","axios","Email","LoginPassword","SubmitButton","UserStore","Profile","Login","props","handleToggle","setState","state","isToggleOn","handlePassword","e","password","target","value","handleEmail","email","handleLogin","buttonDisabled","post","then","res","data","success","isLoggedIn","userID","username","resetForm","alert","msg","catch","error","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Email from \"../signup/Email\";\nimport LoginPassword from \"./LoginPassword\";\nimport SubmitButton from \"./SubmitButton\";\nimport UserStore from \"../../stores/UserStore\";\nimport Profile from \"../Profile/Profile\";\nimport \"./Login.css\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      buttonDisabled: false,\n      isToggleOn: false,\n    };\n  }\n  handleToggle = () => {\n    this.setState((state) => ({\n      isToggleOn: !state.isToggleOn,\n    }));\n  };\n  handlePassword = (e) => {\n    this.setState({\n      password: e.target.value,\n    });\n  };\n  handleEmail = (e) => {\n    this.setState({\n      email: e.target.value,\n    });\n  };\n\n  handleLogin = (e) => {\n    if (!this.state.email) {\n      return;\n    }\n    if (!this.state.password) {\n      return;\n    }\n    this.setState({\n      buttonDisabled: true,\n    });\n    axios\n      .post(\"/login\", {\n        email: this.state.email,\n        password: this.state.password,\n      })\n      .then((res) => {\n        if (res.data.success) {\n          UserStore.isLoggedIn = true;\n          UserStore.userID = res.userID;\n          UserStore.username = res.username;\n        } else {\n          this.resetForm();\n          alert(res.msg);\n        }\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n\n  resetForm() {\n    this.setState({\n      email: \"\",\n      password: \"\",\n      buttonDisabled: false,\n    });\n  }\n\n  render() {\n    const { email, password, buttonDisabled, isToggleOn } = this.state;\n    if (UserStore.isLoggedIn) {\n      return (\n        <div>\n          <Profile />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"login-container\">\n          <div className=\"login-form\">\n            <div className=\"img-banner\">\n              <img className=\"img-main\" src=\"boat.png\" alt=\"\" />\n            </div>\n            <form>\n              <h2>Log in</h2>\n              <Email name=\"email\" email={email} onChange={this.handleEmail} />\n              <LoginPassword\n                name=\"password\"\n                handleToggle={this.handleToggle}\n                isToggleOn={isToggleOn}\n                password={password}\n                onChange={this.handlePassword}\n              />\n              <SubmitButton\n                disabled={buttonDisabled}\n                onClick={() => this.handleLogin()}\n              />\n            </form>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}