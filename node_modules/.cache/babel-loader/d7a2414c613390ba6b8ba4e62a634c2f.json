{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Email from'../signup/Email';import LoginPassword from'./LoginPassword';import SubmitButton from\"./SubmitButton\";import UserStore from\"../../stores/UserStore\";import\"./Login.css\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleToggle=function(){_this.setState(function(state){return{isToggleOn:!state.isToggleOn};});};_this.handlePassword=function(e){_this.setState({password:e.target.value});};_this.handleEmail=function(e){_this.setState({email:e.target.value});};_this.state={email:'',password:'',buttonDisabled:false,isToggleOn:false};return _this;}_createClass(Login,[{key:\"handleLogin\",value:function(){var _handleLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.state.email){_context.next=2;break;}return _context.abrupt(\"return\");case 2:if(this.state.password){_context.next=4;break;}return _context.abrupt(\"return\");case 4:this.setState({buttonDisabled:true});_context.prev=5;_context.next=8;return fetch(\"login\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-type\":\"application/json\"},body:JSON.stringify({email:this.state.email,password:this.state.password})});case 8:res=_context.sent;_context.next=11;return res.json();case 11:result=_context.sent;// ===LOGIN SUCCESSFUL===\nif(result&&result.success){UserStore.isLoggedIn=true;UserStore.email=result.email;// ===LOGIN FAILED===\n}else if(result&&result.success===false){this.resetForm();alert(result.msg);}_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](5);console.log(_context.t0);this.resetForm();case 19:case\"end\":return _context.stop();}}},_callee,this,[[5,15]]);}));function handleLogin(){return _handleLogin.apply(this,arguments);}return handleLogin;}()},{key:\"resetForm\",value:function resetForm(){this.setState({email:\"\",password:\"\",buttonDisabled:false});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,email=_this$state.email,password=_this$state.password,buttonDisabled=_this$state.buttonDisabled,isToggleOn=_this$state.isToggleOn;if(UserStore.isLoggedIn){}return/*#__PURE__*/React.createElement(\"div\",{className:\"login-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"img-banner\"},/*#__PURE__*/React.createElement(\"img\",{className:\"img-main\",src:\"boat.png\",alt:\"\"})),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Log in\"),/*#__PURE__*/React.createElement(Email,{name:\"email\",email:email,onChange:this.handleEmail}),/*#__PURE__*/React.createElement(LoginPassword,{name:\"password\",handleToggle:this.handleToggle,isToggleOn:isToggleOn,password:password,onChange:this.handlePassword}),/*#__PURE__*/React.createElement(SubmitButton,{disabled:buttonDisabled,onClick:function onClick(){return _this2.handleLogin();}}))));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/Phillipe/sei/code-alongs/cc-3-login/culture-club-app/frontend/src/components/login/Login.js"],"names":["React","Component","Email","LoginPassword","SubmitButton","UserStore","Login","props","handleToggle","setState","state","isToggleOn","handlePassword","e","password","target","value","handleEmail","email","buttonDisabled","fetch","method","headers","Accept","body","JSON","stringify","res","json","result","success","isLoggedIn","resetForm","alert","msg","console","log","handleLogin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Email from '../signup/Email'\nimport LoginPassword from './LoginPassword'\nimport SubmitButton from \"./SubmitButton\";\nimport UserStore from \"../../stores/UserStore\";\nimport \"./Login.css\";\n\nclass Login extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      buttonDisabled: false,\n      isToggleOn: false\n    }\n  }\n  handleToggle = () => {\n    this.setState(state => ({\n      isToggleOn: !state.isToggleOn\n    }));\n  };\n  handlePassword = e => {\n    this.setState({\n      password: e.target.value\n    })\n  }\n  handleEmail = e => {\n    this.setState({\n      email: e.target.value\n    })\n  }\n\n  async handleLogin() {\n    if (!this.state.email) {\n      return;\n    }\n    if (!this.state.password) {\n      return;\n    }\n    this.setState({\n      buttonDisabled: true,\n    });\n    try {\n      let res = await fetch(\"login\", {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: this.state.email,\n          password: this.state.password,\n        }),\n      });\n\n      let result = await res.json();\n\n      // ===LOGIN SUCCESSFUL===\n      if (result && result.success) {\n        UserStore.isLoggedIn = true;\n        UserStore.email = result.email;\n\n\n        // ===LOGIN FAILED===\n      } else if (result && result.success === false) {\n        this.resetForm();\n        alert(result.msg);\n      }\n    } catch (e) {\n      console.log(e);\n      this.resetForm();\n    }\n  }\n\n  resetForm() {\n    this.setState({\n      email: \"\",\n      password: \"\",\n      buttonDisabled: false,\n    });\n  }\n\n  render() {\n    const { email, password, buttonDisabled, isToggleOn } = this.state\n    if (UserStore.isLoggedIn) {\n\n    }\n    return (\n      <div className=\"login-container\">\n        <div className=\"login-form\">\n          <div className=\"img-banner\">\n            <img className=\"img-main\" src=\"boat.png\" alt=\"\" />\n          </div>\n          <form>\n            <h2>Log in</h2>\n            <Email name=\"email\" email={email} onChange={this.handleEmail} />\n            <LoginPassword name=\"password\" handleToggle={this.handleToggle} isToggleOn={isToggleOn} password={password} onChange={this.handlePassword} />\n            <SubmitButton\n              disabled={buttonDisabled}\n              onClick={() => this.handleLogin()}\n            />\n          </form>\n        </div >\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}